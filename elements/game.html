
<dom-module id="fireworks-game">

  <style>
  .small-card {
//  	transform: scale(0.25);
//  	transform-origin: 0 0;
  }
  
  fireworks-player {
  	position: absolute;
  }

.player0 {
	transform: scale(2.0);
	transform-origin: 0 0;
	left: 10px;
	top: 440px;
}

  .player1 {
	left: 10px;
	top: 10px;
}

.player2 {
	left: 180px;
	top: 10px;
}

	
  .player3 {
	left: 10px;
	top: 95px;
}

.player4 {
	left: 180px;
	top: 95px;
}


.hints { 
	position: absolute;
	top: 80px;
	left: 285px;
}
.bombs { 
	position: absolute;
	top: 110px;
	left: 285px;
}

.playarea {
	position: absolute;
	left: 5px;
	top: 190px;
	width: 100%;
}
.playarea fireworks-card {
	position: absolute;
	top: 0px;
}
.playarea .card1 {
	left: 10px;
}
.playarea .card2 {
	left: 60px;
}
.playarea .card3 {
	left: 110px;
}
.playarea .card4 {
	left: 160px;
}
.playarea .card5 {
	left: 210px;
}
.deck { 
	left: 280px;
}
.discards {
	position: absolute;
	left: 0px;
	top: 75px;
}

.playarea fireworks-card.row1 { top: 0px; }
.playarea fireworks-card.row2 { top: 10px; }
.playarea fireworks-card.row3 { top: 20px; }
.playarea fireworks-card.row4 { top: 30px; }
.playarea fireworks-card.row5 { top: 40px; }
.playarea fireworks-card.row6 { top: 50px; }
.playarea fireworks-card.row7 { top: 60px; }
.playarea fireworks-card.row8 { top: 70px; }
.playarea fireworks-card.row9 { top: 80px; }
.playarea fireworks-card.row10 { top: 90px; }
	

  </style>
  
  <template>
	<div id="players"></div>
	
	</div>
	<div class="playarea">
		<fireworks-card color="red" number="2" faceup class="small-card card1"></fireworks-card>
		<fireworks-card color="blue" number="1" faceup class="small-card card2"></fireworks-card>
		<fireworks-card color="green" number="1" class="small-card card3" faceup></fireworks-card>
		<fireworks-card color="yellow" number="3" class="small-card card4" faceup></fireworks-card>
		<fireworks-card color="white" number="4" class="small-card card5" faceup></fireworks-card>
		
		<fireworks-card class="deck small-card">{{cardsLeft}}</fireworks-card>
		<fireworks-counter count="{{hints}}" lowCount="3" class="hints">?</fireworks-counter>
		<fireworks-counter count="{{bombs}}" lowCount="1" class="bombs">x</fireworks-counter>
		<div class="discards">
		<fireworks-card color="red" number="2" faceup class="small-card row1 card1"></fireworks-card>
		<fireworks-card color="red" number="1" faceup class="small-card row2 card1"></fireworks-card>
		<fireworks-card color="blue" number="2" faceup class="small-card row1 card2"></fireworks-card>
		<fireworks-card color="green" number="2" faceup class="small-card row1 card3"></fireworks-card>
		<fireworks-card color="green" number="3" faceup class="small-card row2 card3"></fireworks-card>
		<fireworks-card color="green" number="1" faceup class="small-card row3 card3"></fireworks-card>
                <fireworks-card color="green" number="1" faceup class="small-card row4 card3"></fireworks-card>
                <fireworks-card color="green" number="1" faceup class="small-card row5 card3"></fireworks-card>
                <fireworks-card color="green" number="1" faceup class="small-card row6 card3"></fireworks-card>
                <fireworks-card color="green" number="1" faceup class="small-card row7 card3"></fireworks-card>
                <fireworks-card color="green" number="1" faceup class="small-card row8 card3"></fireworks-card>
                <fireworks-card color="green" number="1" faceup class="small-card row9 card3"></fireworks-card>
                <fireworks-card color="green" number="1" faceup class="small-card row10 card3"></fireworks-card>
		<fireworks-card color="yellow" number="5" faceup class="small-card row1 card4"></fireworks-card>
		<fireworks-card color="white" number="2" faceup class="small-card row1 card5"></fireworks-card>
		</div>
		
	</div>
	
	
</template>

  <script>
    FireworksGame = Polymer({
      is: "fireworks-game",

      properties: {      	
      	hints: {
      		type: Number,
      		observer: "_hintsChanged"
      	},
      	bombs: {
      		type: Number,
      		observer: "_bombsChanged"
      	},
      	cardsLeft: {
      		type: Number,
      		observer: "_cardsLeftChanged"
      	},
		localPlayerName: {
			type: String
		},
		players: {
			type: Array
		}
      	
      },
	  
	  factoryImpl: function(localPlayerName, hints, bombs, cardsLeft) {
		this.hints = hints;
		this.bombs = bombs;
		this.cardsLeft = cardsLeft;
		this.localPlayerName = localPlayerName;
		this.players = [];
	  },
	  
	
	  
	  addPlayer: function(name, hand) {
		var playerNumber;
		if(name == this.localPlayerName)
		{
			playerNumber = 0;
		}
		else {
			playerNumber = this.players.length;
		}
		
		var player = new FireworksPlayer(name, playerNumber);
		this.players.push(player);
		this.$.players.appendChild(player);
		return player;
	  },
      
      _hintsChanged: function(newHints, oldHints) {
      	// TODO: maybe do an animation here if it decreased?
      	// TODO: show in red if it's below a certain value
      },
      _bombsChanged: function(newBombs, oldBombs) {
      	// TODO: maybe do an animation here if it decreased?
      	// TODO: show in red if it's below a certain value
      },
      _cardsLeftChanged: function(newCards, oldCards) {
      	// TODO: maybe do an animation here if it decreased?
      	// TODO: show in red if it's below a certain value
      }
      
    });
  </script>

</dom-module>
